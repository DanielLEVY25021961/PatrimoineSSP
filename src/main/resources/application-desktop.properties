# ===== application-desktop.properties ====
# ===== Désactivation Spring Boot =========

# Activation du profil SPRING DESKTOP
spring.config.activate.on-profile=desktop

# Désactivation complète de DevTools avec JavaFX via le application.properties
# spring.devtools.restart.enabled=false
# spring.devtools.livereload.enabled=false
# spring.devtools.add-properties=false

# désactivation de JMX avec JavaFX via le application.properties
spring.jmx.enabled=false

# Pas de serveur web (Tomcat) - "none" Empêche Tomcat de démarrer - "servlet" démarre Tomcat
# spring.main.web-application-type=none
spring.main.web-application-type=servlet

# Désactiver la bannière Spring
spring.main.banner-mode=off

# Pas de datasource via le application.properties
#spring.autoconfigure.exclude=\org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration


# Port HTTP
server.port=8080

#DATASOURCE H2
spring.datasource.url=jdbc:h2:mem:patrimoinedb-desktop;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=""
spring.datasource.driverClassName=org.h2.Driver


# JPA / Hibernate (Jakarta)
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# GESTION DU SCHEMA DE BD ***************
# spring.jpa.hibernate.ddl-auto=none : pas de génération de schéma et pas de validation : PROD
# spring.jpa.hibernate.ddl-auto=validate : Validation = Vérification de l'adéquation du schéma de BD avec les Entities JPA - Erreur si écart, mais pas de changement. : QUALIFICATION
# spring.jpa.hibernate.ddl-auto=create : Drop la BD et la recrée à chaque nouveau lancement de l'application : TESTS MANUELS
# - create Recrée les tables à partir des entités JPA à chaque démarrage 
# - create NE supprime PAS les tables à l’arrêt de l’application. Utile pour garder les données après l’arrêt de l'application 
# - ATTENTION : avec create, Toutes les données sont perdues au démarrage.
# spring.jpa.hibernate.ddl-auto=create-drop : Crée le schéma à chaque nouveau lancement et drop la BD à chaque arrêt de l'application : TESTS AUTOMATISES
# - create-drop Supprime à nouveau le schéma à l’arrêt de l’application (comme au lancement de l'application).
# - ATTENTION : avec create-drop, Les données sont toujours perdues au démarrage et à l'arrêt de l'application.
# - ATTENTION : avec create-Drop, Les tables n’existent plus après l’arrêt.
# spring.jpa.hibernate.ddl-auto=drop : Drop la BD sans la recréer. Utile pour nettoyer totalement la BD.
# spring.jpa.hibernate.ddl-auto=update : Tente de modifier la Base pour tenter de s'aligner sur les modifications des Entities JPA : DEV
# - ATTENTION : update tente d'ajouter des tables, colonnes , index, ...
# - ATTENTION : update ne détruit pas tables, colonnes, contraintes existantes.
# - ATTENTION : update fait ALTER TABLE (si nécessaire) au démarrage et rien à la sortie.
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# SQL lisible en DEV
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Console H2
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console


